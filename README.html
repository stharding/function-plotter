<!DOCTYPE html><html><head><meta charset="utf-8"><style>body
{
  font-size:15px;
  line-height:1.7;
  overflow-x:hidden;

    background-color: white;
    border-radius: 3px;
    border: 3px solid #EEE;
    box-shadow: inset 0 0 0 1px #CECECE;
    font-family: Helvetica, arial, freesans, clean, sans-serif;
    max-width: 912px;
    padding: 30px;
    margin: 2em auto;

    color:#333333;
}


.body-classic{
  color:#444;
  font-family:Georgia, Palatino, 'Palatino Linotype', Times, 'Times New Roman', "Hiragino Sans GB", "STXihei", "微软雅黑", serif;
  font-size:16px;
  line-height:1.5em;
  background:#fefefe;
  width: 45em;
  margin: 10px auto;
  padding: 1em;
  outline: 1300px solid #FAFAFA;
}

body>:first-child
{
  margin-top:0!important;
}

body>:last-child
{
  margin-bottom:0!important;
}

blockquote,dl,ol,p,pre,table,ul {
  border: 0;
  margin: 15px 0;
  padding: 0;
}

body a {
  color: #4183c4;
  text-decoration: none;
}

body a:hover {
  text-decoration: underline;
}

body a.absent
{
  color:#c00;
}

body a.anchor
{
  display:block;
  padding-left:30px;
  margin-left:-30px;
  cursor:pointer;
  position:absolute;
  top:0;
  left:0;
  bottom:0
}

/*h4,h5,h6{ font-weight: bold; }*/

.octicon{
  font:normal normal 16px sans-serif;
  width: 1em;
  height: 1em;
  line-height:1;
  display:inline-block;
  text-decoration:none;
  -webkit-font-smoothing:antialiased
}

.octicon-link {
  background: url("data:image/svg+xml;utf8,<?xml version='1.0' standalone='no'?> <!DOCTYPE svg PUBLIC '-//W3C//DTD SVG 1.1//EN' 'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'> <svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1024 832'> <metadata>Copyright (C) 2013 by GitHub</metadata> <!-- scale(0.01565557729941) --> <path transform='' d='M768 64h-192s-254 0-256 256c0 22 3 43 8 64h137c-11-19-18-41-18-64 0-128 128-128 128-128h192s128 0 128 128-128 128-128 128 0 64-64 128h64s256 0 256-256-256-256-256-256z m-72 192h-137c11 19 18 41 18 64 0 128-128 128-128 128h-192s-128 0-128-128 128-128 128-128-4-65 66-128h-66s-256 0-256 256 256 256 256 256h192s256 0 256-256c0-22-4-44-8-64z'/> </svg>");
  background-size: contain;
  background-repeat: no-repeat;
  background-position: bottom;
}

.octicon-link:before{
  content:'\a0';
}

body h1,body h2,body h3,body h4,body h5,body h6{
  margin:1em 0 15px;
  padding:0;
  font-weight:bold;
  line-height:1.7;
  cursor:text;
  position:relative
}

body h1 .octicon-link,body h2 .octicon-link,body h3 .octicon-link,body h4 .octicon-link,body h5 .octicon-link,body h6 .octicon-link{
  display:none;
  color:#000
}

body h1:hover a.anchor,body h2:hover a.anchor,body h3:hover a.anchor,body h4:hover a.anchor,body h5:hover a.anchor,body h6:hover a.anchor{
  text-decoration:none;
  line-height:1;
  padding-left:0;
  margin-left:-22px;
  top:15%
}

body h1:hover a.anchor .octicon-link,body h2:hover a.anchor .octicon-link,body h3:hover a.anchor .octicon-link,body h4:hover a.anchor .octicon-link,body h5:hover a.anchor .octicon-link,body h6:hover a.anchor .octicon-link{
  display:inline-block
}

body h1 tt,body h1 code,body h2 tt,body h2 code,body h3 tt,body h3 code,body h4 tt,body h4 code,body h5 tt,body h5 code,body h6 tt,body h6 code{
  font-size:inherit
}

body h1{
  font-size:2.5em;
  border-bottom:1px solid #ddd
}

body h2{
  font-size:2em;
  border-bottom:1px solid #eee
}

body h3{
  font-size:1.5em
}

body h4{
  font-size:1.2em
}

body h5{
  font-size:1em
}

body h6{
  color:#777;
  font-size:1em
}

body p,body blockquote,body ul,body ol,body dl,body table,body pre{
  margin:15px 0
}

body h1 tt,body h1 code,body h2 tt,body h2 code,body h3 tt,body h3 code,body h4 tt,body h4 code,body h5 tt,body h5 code,body h6 tt,body h6 code
{
  font-size:inherit;
}


body hr
{
  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAECAYAAACtBE5DAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OENDRjNBN0E2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OENDRjNBN0I2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4Q0NGM0E3ODY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4Q0NGM0E3OTY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqqezsUAAAAfSURBVHjaYmRABcYwBiM2QSA4y4hNEKYDQxAEAAIMAHNGAzhkPOlYAAAAAElFTkSuQmCC);
  background-repeat: repeat-x;
  /*background:transparent url(http://overblown.net/files/markdown/dirty-shade.png) repeat-x 0 0;*/
  background-color: transparent;
  background-position: 0;
  border:0 none;
  color:#ccc;
  height:4px;
  margin:15px 0;
  padding:0;
}

body li p.first
{
  display:inline-block;
}

body ul,body ol
{
  padding-left:30px;
}

body ul.no-list,body ol.no-list
{
  list-style-type:none;
  padding:0;
}

body ul ul,body ul ol,body ol ol,body ol ul
{
  margin-bottom:0;
  margin-top:0;
}

body dl
{
  padding:0;
}

body dl dt
{
  font-size:14px;
  font-style:italic;
  font-weight:700;
  margin-top:15px;
  padding:0;
}

body dl dd
{
  margin-bottom:15px;
  padding:0 15px;
}

body blockquote
{
  border-left:4px solid #DDD;
  color:#777;
  padding:0 15px;
}

body blockquote>:first-child
{
  margin-top:0;
}

body blockquote>:last-child
{
  margin-bottom:0;
}

body table
{
  display:block;
  overflow:auto;
  width:100%;
  border-collapse: collapse;
  border-spacing: 0;
  padding: 0;
}

body table th
{
  font-weight:700;
}

body table th,body table td
{
  border:1px solid #ddd;
  padding:6px 13px;
}

body table tr
{
  background-color:#fff;
  border-top:1px solid #ccc;
}

body table tr:nth-child(2n)
{
  background-color:#f8f8f8;
}

body img
{
  -moz-box-sizing:border-box;
  box-sizing:border-box;
  max-width:100%;
}

body span.frame
{
  display:block;
  overflow:hidden;
}

body span.frame>span
{
  border:1px solid #ddd;
  display:block;
  float:left;
  margin:13px 0 0;
  overflow:hidden;
  padding:7px;
  width:auto;
}

body span.frame span img
{
  display:block;
  float:left;
}

body span.frame span span
{
  clear:both;
  color:#333;
  display:block;
  padding:5px 0 0;
}

body span.align-center
{
  clear:both;
  display:block;
  overflow:hidden;
}

body span.align-center>span
{
  display:block;
  margin:13px auto 0;
  overflow:hidden;
  text-align:center;
}

body span.align-center span img
{
  margin:0 auto;
  text-align:center;
}

body span.align-right
{
  clear:both;
  display:block;
  overflow:hidden;
}

body span.align-right>span
{
  display:block;
  margin:13px 0 0;
  overflow:hidden;
  text-align:right;
}

body span.align-right span img
{
  margin:0;
  text-align:right;
}

body span.float-left
{
  display:block;
  float:left;
  margin-right:13px;
  overflow:hidden;
}

body span.float-left span
{
  margin:13px 0 0;
}

body span.float-right
{
  display:block;
  float:right;
  margin-left:13px;
  overflow:hidden;
}

body span.float-right>span
{
  display:block;
  margin:13px auto 0;
  overflow:hidden;
  text-align:right;
}

body code,body tt
{
  background-color:#f8f8f8;
  border:1px solid #ddd;
  border-radius:3px;
  margin:0 2px;
  padding:0 5px;
}

body code
{
  white-space:nowrap;
}


code,pre{
  font-family:Consolas, "Liberation Mono", Courier, monospace;
  font-size:12px
}

body pre>code
{
  background:transparent;
  border:none;
  margin:0;
  padding:0;
  white-space:pre;
}

body .highlight pre,body pre
{
  background-color:#f8f8f8;
  border:1px solid #ddd;
  font-size:13px;
  line-height:19px;
  overflow:auto;
  padding:6px 10px;
  border-radius:3px
}

body pre code,body pre tt
{
  background-color:transparent;
  border:none;
  margin:0;
  padding:0;
}

body .task-list{
  list-style-type:none;
  padding-left:10px
}

.task-list-item{
  padding-left:20px
}

.task-list-item label{
  font-weight:normal
}

.task-list-item.enabled label{
  cursor:pointer
}

.task-list-item+.task-list-item{
  margin-top:5px
}

.task-list-item-checkbox{
  float:left;
  margin-left:-20px;
  margin-top:7px
}


.highlight{
  background:#ffffff
}

.highlight .c{
  color:#999988;
  font-style:italic
}

.highlight .err{
  color:#a61717;
  background-color:#e3d2d2
}

.highlight .k{
  font-weight:bold
}

.highlight .o{
  font-weight:bold
}

.highlight .cm{
  color:#999988;
  font-style:italic
}

.highlight .cp{
  color:#999999;
  font-weight:bold
}

.highlight .c1{
  color:#999988;
  font-style:italic
}

.highlight .cs{
  color:#999999;
  font-weight:bold;
  font-style:italic
}

.highlight .gd{
  color:#000000;
  background-color:#ffdddd
}

.highlight .gd .x{
  color:#000000;
  background-color:#ffaaaa
}

.highlight .ge{
  font-style:italic
}

.highlight .gr{
  color:#aa0000
}

.highlight .gh{
  color:#999999
}

.highlight .gi{
  color:#000000;
  background-color:#ddffdd
}

.highlight .gi .x{
  color:#000000;
  background-color:#aaffaa
}

.highlight .go{
  color:#888888
}

.highlight .gp{
  color:#555555
}

.highlight .gs{
  font-weight:bold
}

.highlight .gu{
  color:#800080;
  font-weight:bold
}

.highlight .gt{
  color:#aa0000
}

.highlight .kc{
  font-weight:bold
}

.highlight .kd{
  font-weight:bold
}

.highlight .kn{
  font-weight:bold
}

.highlight .kp{
  font-weight:bold
}

.highlight .kr{
  font-weight:bold
}

.highlight .kt{
  color:#445588;
  font-weight:bold
}

.highlight .m{
  color:#009999
}

.highlight .s{
  color:#d14
}

.highlight .n{
  color:#333333
}

.highlight .na{
  color:#008080
}

.highlight .nb{
  color:#0086B3
}

.highlight .nc{
  color:#445588;
  font-weight:bold
}

.highlight .no{
  color:#008080
}

.highlight .ni{
  color:#800080
}

.highlight .ne{
  color:#990000;
  font-weight:bold
}

.highlight .nf{
  color:#990000;
  font-weight:bold
}

.highlight .nn{
  color:#555555
}

.highlight .nt{
  color:#000080
}

.highlight .nv{
  color:#008080
}

.highlight .ow{
  font-weight:bold
}

.highlight .w{
  color:#bbbbbb
}

.highlight .mf{
  color:#009999
}

.highlight .mh{
  color:#009999
}

.highlight .mi{
  color:#009999
}

.highlight .mo{
  color:#009999
}

.highlight .sb{
  color:#d14
}

.highlight .sc{
  color:#d14
}

.highlight .sd{
  color:#d14
}

.highlight .s2{
  color:#d14
}

.highlight .se{
  color:#d14
}

.highlight .sh{
  color:#d14
}

.highlight .si{
  color:#d14
}

.highlight .sx{
  color:#d14
}

.highlight .sr{
  color:#009926
}

.highlight .s1{
  color:#d14
}

.highlight .ss{
  color:#990073
}

.highlight .bp{
  color:#999999
}

.highlight .vc{
  color:#008080
}

.highlight .vg{
  color:#008080
}

.highlight .vi{
  color:#008080
}

.highlight .il{
  color:#009999
}

.highlight .gc{
  color:#999;
  background-color:#EAF2F5
}

.type-csharp .highlight .k{
  color:#0000FF
}

.type-csharp .highlight .kt{
  color:#0000FF
}

.type-csharp .highlight .nf{
  color:#000000;
  font-weight:normal
}

.type-csharp .highlight .nc{
  color:#2B91AF
}

.type-csharp .highlight .nn{
  color:#000000
}

.type-csharp .highlight .s{
  color:#A31515
}

.type-csharp .highlight .sc{
  color:#A31515
}
</style><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script>
MathJax.Hub.Config({
  config: ["MMLorHTML.js"],
  extensions: ["tex2jax.js"],
  jax: ["input/TeX"],
  tex2jax: {
    inlineMath: [ ['$','$'], ["\\(","\\)"] ],
    displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
    processEscapes: false
  },
  TeX: {
    extensions: ["AMSmath.js", "AMSsymbols.js"],
    TagSide: "right",
    TagIndent: ".8em",
    MultLineWidth: "85%",
    equationNumbers: {
      autoNumber: "AMS",
    },
    unicode: {
      fonts: "STIXGeneral,'Arial Unicode MS'"
    }
  },
  showProcessingMessages: false
});
</script>
<title>README</title></head><body><h2>
<a name="user-content-function-plotter-documentation" class="anchor" href="#function-plotter-documentation"><span class="octicon octicon-link"></span></a>Function Plotter Documentation</h2>

<h3>
<a name="user-content-requirements" class="anchor" href="#requirements"><span class="octicon octicon-link"></span></a>Requirements</h3>

<p>This project uses the <a href="http://ace.c9.io/#nav=about">Ace</a> project for the
user editable portions of the function-plotter. The <code>ace-builds</code> folder must be
in the <code>Common</code> folder in this project. The repository for <code>ace-builds</code> is at
<a href="https://github.com/ajaxorg/ace-builds.git">https://github.com/ajaxorg/ace-builds.git</a></p>

<h3>
<a name="user-content-overview" class="anchor" href="#overview"><span class="octicon octicon-link"></span></a>Overview</h3>

<p>The function plotter plots functions of the form <code>z = f(x, y)</code>.
The plotter has two fundamental modes: 2d mode and 3d mode.</p>

<h5>
<a name="user-content-2d-mode" class="anchor" href="#2d-mode"><span class="octicon octicon-link"></span></a>2D Mode:</h5>

<p>In 2d mode, the <code>z = f(x, y)</code> function is rendered using a (user definable)
color map which depends on the <code>z</code> value of the function, and the <code>x</code> and <code>y</code>
values are based on the <code>(x, y)</code> pixel coordinates of the canvas.</p>

<p>The user is free to explore the function in many ways in 2d mode. The domain
of the function can be changed by panning/zooming with the mouse. Clicking
and dragging will pan the plot view and the mouse wheel will change the scale
of the plot (effecting either a zoom in or out depending on the direction of
the wheel movement). If preferred, panning and zooming can be accomplished via
the arrow keys on the keyboard. (hold the shift key for zooming.) The user can
tweak the RGB color mapping by editing the color function on the page. Most
importantly, the user can edit the function to be plotted.</p>

<h5>
<a name="user-content-3d-mode" class="anchor" href="#3d-mode"><span class="octicon octicon-link"></span></a>3D Mode:</h5>

<p>In 3d mode, the user can no longer change the color mapping or the expressionM
to be evaluated (all such edits should be completed in 2d mode). Instead, the
user is free to explore the plotted function in other ways. In 3d mode, clicking
and dragging the mouse will rotate the plotted function in 3d space. The mouse
wheel zooms into our out of the 3d plot.</p>

<h3>
<a name="user-content-usage" class="anchor" href="#usage"><span class="octicon octicon-link"></span></a>Usage</h3>

<p>The plotter consists primarily of a canvas area, a color function
editor, a helper function editor, and an expression editor.</p>

<p><strong>NOTE</strong>: Each of the editable areas will end up modifying the fragment shader.
as such, all of the <code>GLSL</code> language is available to implement these functions.
On the other hand, the user is also limited by the <code>GLSL</code> language
peculiarities. For example, <code>GLSL</code> provides no implicit casting of numeric
literals. e.g. the following expression will cause a compilation error:
<code>1 + 1.0</code>! Since almost all of the builtin <code>GLSL</code> functions take <code>float</code> typed
input, it is probably best to avoid <code>int</code> variables and integer constants.</p>

<h5>
<a name="user-content-color-function" class="anchor" href="#color-function"><span class="octicon octicon-link"></span></a>Color function:</h5>

<p>A <code>GLSL</code> function named <code>getcolor()</code> must be defined. The following definition
is provided as a default:</p>

<div class="highlight highlight-java"><pre><span class="n">vec4</span> <span class="nf">getcolor</span><span class="o">(</span><span class="kt">float</span> <span class="n">z</span><span class="o">)</span>
<span class="o">{</span>
  <span class="kt">float</span> <span class="n">r</span> <span class="o">=</span> <span class="n">z</span> <span class="o">+</span> <span class="n">z</span> <span class="o">&gt;</span> <span class="mf">1.0</span> <span class="o">?</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="o">(</span><span class="n">z</span> <span class="o">+</span> <span class="n">z</span><span class="o">)</span> <span class="o">:</span> <span class="n">z</span> <span class="o">+</span> <span class="n">z</span><span class="o">;</span>
  <span class="kt">float</span> <span class="n">g</span> <span class="o">=</span> <span class="n">z</span>     <span class="o">&gt;</span> <span class="mf">1.0</span> <span class="o">?</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="o">(</span><span class="n">z</span> <span class="o">*</span> <span class="n">z</span><span class="o">)</span> <span class="o">:</span> <span class="n">z</span><span class="o">;</span>
  <span class="kt">float</span> <span class="n">b</span> <span class="o">=</span> <span class="n">z</span>     <span class="o">&gt;</span> <span class="mf">1.0</span> <span class="o">?</span> <span class="mf">1.0</span> <span class="o">/</span>  <span class="n">z</span>      <span class="o">:</span> <span class="n">z</span> <span class="o">*</span> <span class="n">z</span><span class="o">;</span>
  <span class="k">return</span> <span class="nf">vec4</span><span class="o">(</span><span class="n">r</span><span class="o">,</span> <span class="n">g</span><span class="o">,</span> <span class="n">b</span><span class="o">,</span> <span class="mf">1.0</span><span class="o">);</span>
<span class="o">}</span>
</pre></div>

<h5>
<a name="user-content-helper-functions" class="anchor" href="#helper-functions"><span class="octicon octicon-link"></span></a>Helper function(s):</h5>

<p>An editor is provided so that the user can implement any helper functions they
would like for use in the expression evaluator area. This allows for the use
of functions above and beyond the builtin <code>GLSL</code> functions. See the example
section for some interesting uses of the helper function editor.</p>

<p><strong>Note:</strong> Any global variables declared in this box will be in scope for both
both the color function editor and the expression editor.</p>

<h5>
<a name="user-content-expression-editor" class="anchor" href="#expression-editor"><span class="octicon octicon-link"></span></a>Expression Editor:</h5>

<p>An editor box is provided so the user can input an expression to be plotted.
the expression <em>must</em> be in terms of the (internally declared) variables <code>x</code>
and <code>y</code>. A default expression is provided:</p>

<div class="highlight highlight-java"><pre><span class="n">sin</span><span class="o">(</span> <span class="n">x</span><span class="o">*</span><span class="n">x</span> <span class="o">+</span> <span class="n">y</span><span class="o">*</span><span class="n">y</span> <span class="o">)</span>
</pre></div>

<p>However, the user is encouraged to change this expression and plot more
interesting functions.</p>

<h3>
<a name="user-content-how-it-works" class="anchor" href="#how-it-works"><span class="octicon octicon-link"></span></a>How it works:</h3>

<h5>
<a name="user-content-2d" class="anchor" href="#2d"><span class="octicon octicon-link"></span></a>2D:</h5>

<p>In 2D mode, the plotter is pretty straightforward. When the user hits the
<code>Render2D</code> button, the fragment shader is recompiled (or compiled for the first
time if this is the first time the button has been pressed) with <code>getcolor()</code>,
any helper functions the user has entered in the helper function editor,
the expression entered into the expression editor, and a bunch of code that
the user is not exposed to. Essentially what is happening is that the
<code>gl_FragCoord.x</code> and <code>gl_FragCoord.y</code> coordinates are translated into a
user-specified range (e.g. mouse manipulation of the plot) and the translated
<code>x</code> and <code>y</code> values are evaluated in the user supplied expression. The resultant
<code>z</code> value is passed to the <code>getcolor()</code> function which returns a <code>vec4</code>. The
<code>vec4</code> is interpreted as a color which the fragment shader uses to set
<code>gl_FragColor</code>.</p>

<p>Since all of the important computation is done on the fragment shader the
rendering is real-time for most reasonable functions.</p>

<h5>
<a name="user-content-3d" class="anchor" href="#3d"><span class="octicon octicon-link"></span></a>3D:</h5>

<p>Once the mode has completely transitioned to 3D, the plotter is trivially
straightforward. The freedom to change the domain of the function and its
color mapping is disabled. In 3D mode the function is plotted as a 3-dimensional
surface. Instead of changing the domain (by panning andzooming) dragging the
mouse rotates the function plot about the appropriate axis. If the shift key is
depressed, dragging up and down will move the plot up and down in the view.
Dragging left or right with the shift key depressed will rotate the function
plot about the z-azis (from the point of view of the camera). The mouse wheel
will move the camera closer or farther away from the plot.</p>

<p>The transition from 2D mode to 3D mode takes several steps to complete.
First, the canvas is resized to 512x512 and re-rendered in 2D mode. An image
of the canvas is saved for later use as a texture map for shading.</p>

<p>Next, the shader is recompiled with an alternate version of <code>getcolor()</code> which
encodes the floating point value <code>z</code> into a <code>vec4</code> of 4 bytes. (<em>Note: I did not
write the code that does this. It came from this
<a href="http://stackoverflow.com/questions/17981163/webgl-read-pixels-from-floating-point-render-target">StackOverflow answer</a></em>.)
The canvas is re-rendered with this special version of <code>getcolor()</code> and the
javascript application makes a call to <code>gl.readPixels()</code> and makes a new
<code>Float32Array</code> with the buffer data to extract the float values.</p>

<p>Using a simple transformation to convert the <code>x</code> and <code>y</code> function coordinates
into clip coordinates, the application generates two 512x512 array of vertices.
In both of the arrays the <code>x, y</code> part of the vertex is drawn from the
transformed <code>x</code> and <code>y</code> function coordinates. In one of the arrays, the <code>z</code>
value is the unchanged function output and in the other array, the <code>z</code> value is
takes the function output and transforms it into the range <code>[-1, 1]</code>.</p>

<p>In both cases, <code>NaN</code> and <code>Infinity</code> are handled (since these are not
appropriate vertex position values) by copying the nearest finite value in the
array.</p>

<p>Even though there are 262,144 vertices in the scene, the points are sent to the
graphics card only once and as a result, the manipulation of the plotted
function is real-time for any computer with a modern graphics card.</p>

<h3>
<a name="user-content-examples" class="anchor" href="#examples"><span class="octicon octicon-link"></span></a>Examples:</h3>

<p>The default function <code>sin( x*x + y*y )</code> with the default color mapping and
bounding box looks like this in 2D mode:</p>

<p><a href="img/2d-sin.png" target="_blank"><img src="img/2d-sin.png" alt="2d-sin" title="2d-sin" style="max-width:100%;"></a></p>

<p>Rendered in 3D (with a small zoom out and rotation):</p>

<p><a href="img/3d-sin.png" target="_blank"><img src="img/3d-sin.png" alt="3d-sin" title="3d-sin" style="max-width:100%;"></a></p>

<p>In 3D mode with 'Points mode' on:</p>

<p><a href="img/3d-sin-points.png" target="_blank"><img src="img/3d-sin-points.png" alt="3d-sin-points" title="3d-sin-points" style="max-width:100%;"></a></p>

<p>Some functions have interesting behavior at large scales. Consider this
function: <code>sin( x*x + y*y )*1.0/tan(x*y+x*y)</code></p>

<p>At a small scale it looks like this:</p>

<p><a href="img/sin-tan.png" target="_blank"><img src="img/sin-tan.png" alt="sin-tan" style="max-width:100%;"></a></p>

<p>But at large scale it looks like this (the bounding box is approximately
-75,000 to 75,000):</p>

<p><a href="img/sin-tan-big.png" target="_blank"><img src="img/sin-tan-big.png" alt="sin-tan" style="max-width:100%;"></a></p>

<p>It gets even more interesting when plotted in 3D with normalization turned off
and points mode on. When we rotate the plot, we see what appear to be regular
layers of points that have roughly equal values:</p>

<p><a href="img/sin-tan-3d.png" target="_blank"><img src="img/sin-tan-3d.png" alt="sin-tan" style="max-width:100%;"></a></p>

<h4>
<a name="user-content-helper-functions-1" class="anchor" href="#helper-functions-1"><span class="octicon octicon-link"></span></a>Helper Functions:</h4>

<p>The utility of the function plotter is greatly expanded by the ability to
define custom function which can be called by the expression evaluator.</p>

<p>Functions which do not have a closed form or are otherwise best suited to
iterative (or approximate) evaluation can be plotted by defining a helper
function and calling it in the expression editor.</p>

<p>An excellent example of a function which does not have a closed form is the
<a href="http://en.wikipedia.org/wiki/Mandelbrot_set">Mandelbrot Set</a></p>

<p>The <a href="http://en.wikipedia.org/wiki/Mandelbrot_set">Mandelbrot Set</a>
is defined as the set of points <code>Z</code> which satisfy the condition that the
expression <a href="img/mand_formula.png" target="_blank"><img src="img/mand_formula.png" height="13pt" style="max-width:100%;"></a> is bounded, for
all points in the complex plane. To actually know if a point is in the set
or not, we would have to do an infinite number of iterations for every point!</p>

<p>Since that is not possible, the best we can do is do a finite number of
iterations and if a complex number <code>c = x + iy</code> makes
<a href="img/mand_formula.png" target="_blank"><img src="img/mand_formula.png" height="13pt" style="max-width:100%;"></a>  less than some finite
bound (4 turns out to be a suitable bound) we declare it to be in the set.</p>

<p>If we interpret pixel locations on the canvas to be point in the complex plane
we can plot an approximation of the
<a href="http://en.wikipedia.org/wiki/Mandelbrot_set">Mandelbrot Set</a>. Furthermore,
if we color each pixel based on the number of iterations it took to exclude it
from the set, a very interesting image is generated--especially if we zoom in
on parts of the image.</p>

<p>Here is some code to put into the helper function code editor to render the
Mandelbrot:</p>

<div class="highlight highlight-java"><pre><span class="kd">const</span> <span class="kt">float</span> <span class="n">max</span> <span class="o">=</span> <span class="mf">100.0</span><span class="o">;</span>
<span class="kt">float</span> <span class="nf">mandelbrot</span><span class="o">(</span><span class="kt">float</span> <span class="n">fx</span><span class="o">,</span> <span class="kt">float</span> <span class="n">fy</span><span class="o">)</span> <span class="o">{</span>
  <span class="kt">float</span> <span class="n">iteration</span>  <span class="o">=</span> <span class="mf">0.0</span><span class="o">;</span>
  <span class="kt">float</span> <span class="n">x</span>          <span class="o">=</span> <span class="mf">0.0</span><span class="o">;</span>
  <span class="kt">float</span> <span class="n">y</span>          <span class="o">=</span> <span class="mf">0.0</span><span class="o">;</span>
  <span class="kt">float</span> <span class="n">xtemp</span>      <span class="o">=</span> <span class="mf">0.0</span><span class="o">;</span>

  <span class="k">for</span> <span class="o">(</span> <span class="kt">float</span> <span class="n">i</span> <span class="o">=</span> <span class="mf">0.0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">max</span><span class="o">;</span> <span class="o">++</span><span class="n">i</span>  <span class="o">)</span>
  <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span> <span class="n">sqrt</span><span class="o">(</span><span class="n">x</span> <span class="o">*</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span> <span class="o">*</span> <span class="n">y</span><span class="o">)</span> <span class="o">&lt;=</span> <span class="mf">4.0</span> <span class="o">)</span> <span class="o">{</span>
      <span class="n">xtemp</span> <span class="o">=</span> <span class="n">x</span> <span class="o">*</span> <span class="n">x</span> <span class="o">-</span> <span class="n">y</span> <span class="o">*</span> <span class="n">y</span> <span class="o">+</span> <span class="n">fx</span><span class="o">;</span>
      <span class="n">y</span> <span class="o">=</span> <span class="mf">2.0</span> <span class="o">*</span> <span class="n">x</span> <span class="o">*</span> <span class="n">y</span> <span class="o">+</span> <span class="n">fy</span><span class="o">;</span>
      <span class="n">x</span> <span class="o">=</span> <span class="n">xtemp</span><span class="o">;</span>
      <span class="n">iteration</span> <span class="o">=</span> <span class="n">i</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="k">else</span><span class="o">{</span> <span class="k">break</span><span class="o">;</span> <span class="o">}</span>
  <span class="o">}</span>
  <span class="k">return</span> <span class="n">iteration</span><span class="o">;</span>
<span class="o">}</span>
</pre></div>

<p>We will also need to modify the color function a little:</p>

<div class="highlight highlight-java"><pre><span class="n">vec4</span> <span class="nf">getcolor</span><span class="o">(</span><span class="kt">float</span> <span class="n">z</span><span class="o">)</span>
<span class="o">{</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">z</span> <span class="o">==</span> <span class="n">max</span> <span class="o">-</span> <span class="mf">1.0</span><span class="o">)</span> <span class="k">return</span> <span class="n">vec4</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span><span class="mi">0</span><span class="o">,</span><span class="mi">0</span><span class="o">,</span><span class="mi">1</span><span class="o">);</span>
  <span class="n">z</span><span class="o">/=</span><span class="n">max</span><span class="o">;</span>
  <span class="kt">float</span> <span class="n">r</span> <span class="o">=</span> <span class="n">z</span> <span class="o">+</span> <span class="n">z</span> <span class="o">&gt;</span> <span class="mf">1.0</span> <span class="o">?</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="o">(</span><span class="n">z</span> <span class="o">+</span> <span class="n">z</span><span class="o">)</span> <span class="o">:</span> <span class="n">z</span> <span class="o">+</span> <span class="n">z</span><span class="o">;</span>
  <span class="kt">float</span> <span class="n">g</span> <span class="o">=</span> <span class="n">z</span>     <span class="o">&gt;</span> <span class="mf">1.0</span> <span class="o">?</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="o">(</span><span class="n">z</span> <span class="o">*</span> <span class="n">z</span><span class="o">)</span> <span class="o">:</span> <span class="n">z</span><span class="o">;</span>
  <span class="kt">float</span> <span class="n">b</span> <span class="o">=</span> <span class="n">z</span>     <span class="o">&gt;</span> <span class="mf">1.0</span> <span class="o">?</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="n">z</span>       <span class="o">:</span> <span class="n">z</span> <span class="o">*</span> <span class="n">z</span><span class="o">;</span>
  <span class="k">return</span> <span class="nf">vec4</span><span class="o">(</span><span class="n">r</span><span class="o">,</span> <span class="n">g</span><span class="o">,</span> <span class="n">b</span><span class="o">,</span> <span class="mf">1.0</span><span class="o">);</span>
<span class="o">}</span>
</pre></div>

<p>Now just enter <code>mandelbrot(x, y)</code> in the expression evaluator and click the
<code>Render2D</code> button.</p>

<p>Here is the rendering of the set that you get:</p>

<p><a href="img/mand.png" target="_blank"><img src="img/mand.png" alt="Mandelbrot" style="max-width:100%;"></a></p>

<p>If we zoom in a bit on one of the interior edges and change <code>max</code> to 700.0 we
can see some nice detail:</p>

<p><a href="img/mand-zoom.png" target="_blank"><img src="img/mand-zoom.png" alt="Mandelbrot" style="max-width:100%;"></a></p>

<p>If we transition to 3D mode and tilt the plot a bit we can see the rate at
which point were eliminated from the set by their elevation:</p>

<p><a href="img/mand-3d-tri.png" target="_blank"><img src="img/mand-3d-tri.png" alt="Mandelbrot" style="max-width:100%;"></a></p>

<p>This effect can perhaps more easily be seen if we switch to points mode:</p>

<p><a href="img/mand-3d-pnt.png" target="_blank"><img src="img/mand-3d-pnt.png" alt="Mandelbrot" style="max-width:100%;"></a></p>

<p>Another example of an interesting non-closed form function is the
<a href="http://en.wikipedia.org/wiki/Julia_set">Julia Set</a> which is similar to the
Mandelbrot Set. If we use this code in the helper function editor:</p>

<div class="highlight highlight-java"><pre><span class="kd">const</span> <span class="kt">float</span> <span class="n">max</span> <span class="o">=</span> <span class="mf">100.0</span><span class="o">;</span>
<span class="kt">float</span> <span class="nf">julia</span><span class="o">(</span> <span class="kt">float</span> <span class="n">x</span><span class="o">,</span> <span class="kt">float</span> <span class="n">y</span> <span class="o">)</span> <span class="o">{</span>
  <span class="kt">float</span> <span class="n">cRe</span> <span class="o">=</span> <span class="o">-</span><span class="mf">0.7</span><span class="o">;</span>
  <span class="kt">float</span> <span class="n">cIm</span> <span class="o">=</span> <span class="mf">0.27015</span><span class="o">;</span>
  <span class="kt">float</span> <span class="n">z</span> <span class="o">=</span> <span class="mf">0.0</span><span class="o">;</span>
  <span class="kt">float</span> <span class="n">xtemp</span><span class="o">;</span>
  <span class="k">for</span><span class="o">(</span><span class="kt">float</span> <span class="n">i</span> <span class="o">=</span> <span class="mf">0.0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">max</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span>
  <span class="o">{</span>
    <span class="n">xtemp</span> <span class="o">=</span> <span class="n">x</span> <span class="o">*</span> <span class="n">x</span> <span class="o">-</span> <span class="n">y</span> <span class="o">*</span> <span class="n">y</span> <span class="o">+</span> <span class="n">cRe</span><span class="o">;</span>
    <span class="n">y</span> <span class="o">=</span> <span class="mf">2.0</span> <span class="o">*</span> <span class="n">x</span> <span class="o">*</span> <span class="n">y</span> <span class="o">+</span> <span class="n">cIm</span><span class="o">;</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">xtemp</span><span class="o">;</span>
    <span class="k">if</span><span class="o">((</span><span class="n">x</span> <span class="o">*</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span> <span class="o">*</span> <span class="n">y</span><span class="o">)</span> <span class="o">&gt;</span> <span class="mf">4.0</span><span class="o">)</span> <span class="k">break</span><span class="o">;</span>
    <span class="n">z</span> <span class="o">=</span> <span class="n">i</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="k">return</span> <span class="n">z</span><span class="o">;</span>
<span class="o">}</span>
</pre></div>

<p>we get this rendering (using the same <code>getcolor()</code> function and entering
<code>julia(x, y)</code> in the expression editor):</p>

<p><a href="img/julia.png" target="_blank"><img src="img/julia.png" alt="julia" style="max-width:100%;"></a></p>

<p>Zooming in and bumping up <code>max</code> to 2000.0 we get:</p>

<p><a href="img/julia-zoom.png" target="_blank"><img src="img/julia-zoom.png" alt="julia" style="max-width:100%;"></a></p>

<p>Going 3D (with some rotations and zooming):</p>

<p><a href="img/julia-3d-tri.png" target="_blank"><img src="img/julia-3d-tri.png" alt="julia" style="max-width:100%;"></a></p>

<p>In points mode:</p>

<p><a href="img/julia-3d-pnt.png" target="_blank"><img src="img/julia-3d-pnt.png" alt="julia" style="max-width:100%;"></a></p>

<p>Feel free to contact me with questions/issues at stharding at gmail dot com</p></body></html>